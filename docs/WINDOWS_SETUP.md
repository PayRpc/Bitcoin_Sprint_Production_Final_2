# Windows Setup Guide for Multi-Chain Sprint

## Quick Setup for Windows Developers

### 1. Generate Secure RPC Credentials

Run the included PowerShell script:

```powershell
.\gen-rpcauth.ps1 -User sprint -Password "MyStrongPassw0rd!"
```

Output:
```
🔐 Bitcoin Core RPC Auth Generator (PowerShell)
=============================================

Generated RPC Auth Configuration:
=================================
rpcauth=sprint:1cba94f0a8b1$7b56b8df2cf56f02a89493c8b7fbcf9c0e68ec7df91d054ee

📋 Copy this line to your bitcoin.conf file
📋 Use these credentials in your .env file:
   BTC_RPC_USER=sprint
   BTC_RPC_PASS=MyStrongPassw0rd!

✅ Setup complete! Your RPC credentials are now secure.
```

### 2. Configure Bitcoin Core

Place `bitcoin.conf` in your Bitcoin data directory:
- **Windows:** `%APPDATA%\Bitcoin\bitcoin.conf`

```conf
# ─────────────── Bitcoin Core Config for Sprint (rpcauth) ───────────────

server=1
rpcauth=sprint:1cba94f0a8b1$7b56b8df2cf56f02a89493c8b7fbcf9c0e68ec7df91d054ee
rpcbind=127.0.0.1
rpcallowip=127.0.0.1

# ZeroMQ (Sprint needs this)
zmqpubhashblock=tcp://127.0.0.1:28332
zmqpubhashtx=tcp://127.0.0.1:28333

# Pruned node (~2 GB)
prune=2000
txindex=0

# Networking
listen=1
maxconnections=40
port=8333

# Performance
dbcache=2000
par=2
```

### 3. Configure Sprint Environment

Your `.env` file should contain:

```env
# ─────────────── Bitcoin Sprint Environment ───────────────

# === Bitcoin RPC (matches your rpcauth) ===
BTC_RPC_HOST=127.0.0.1:8332
BTC_RPC_USER=sprint
BTC_RPC_PASS=MyStrongPassw0rd!
BTC_RPC_DISABLE_TLS=true

# === ZeroMQ (must match bitcoin.conf) ===
ZMQ_ENDPOINT_BLOCK=tcp://127.0.0.1:28332
ZMQ_ENDPOINT_TX=tcp://127.0.0.1:28333

# === Sprint API Server ===
API_HOST=0.0.0.0
API_PORT=8080
PEER_LISTEN_PORT=8335

# === Licensing & Security ===
LICENSE_KEY=your_super_secret_license_key_change_this
```

### 4. Start Services

```powershell
# 1. Start Bitcoin Core
bitcoind.exe

# 2. Wait for initial sync (can take hours/days for full node)
# For pruned node, much faster

# 3. Start Bitcoin Sprint API
$env:CGO_ENABLED="0"
go build -o bitcoin-sprint-api.exe ./cmd/sprintd
$env:LICENSE_KEY="free-test-key"
./bitcoin-sprint-api.exe

# 4. Start Next.js frontend (in web folder)
cd web
npm run dev
```

### 5. Verify Setup

Test the API endpoints:

```powershell
# Health check
curl http://localhost:8080/health

# Status (requires API key)
curl -H "X-API-Key: changeme" http://localhost:8080/status

# Latest blocks
curl -H "X-API-Key: changeme" http://localhost:8080/latest
```

## Security Notes

- **Development:** Uses `rpcuser`/`rpcpassword` for simplicity
- **Production:** Always use `rpcauth` generated by the PowerShell script
- **Firewall:** Bitcoin Core (8332, 8333) and Sprint API (8080) ports
- **Credentials:** Store strong passwords in environment variables, not code

## Troubleshooting

### Bitcoin Core won't start
- Check `%APPDATA%\Bitcoin\debug.log` for errors
- Verify bitcoin.conf syntax (no trailing spaces)
- Ensure ports 8332, 8333 are not in use

### Sprint API connection errors
- Verify Bitcoin Core is running and synced
- Check ZMQ ports are accessible
- Validate .env credentials match bitcoin.conf

### Performance issues
- Increase `dbcache` if you have more RAM
- Adjust `par` based on CPU cores
- Consider SSD for blockchain storage
